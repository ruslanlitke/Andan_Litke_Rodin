# Проект по Анализу данных "Взаимосвязь ключевых экономических показателей США за последние 10 лет в сфере энергетики"
#
# _Подготовили: Литке Руслан, Родин Владимир._
#
## Компании, взятые для анализа (указаны их тикеры):
- AEP
- D
- DUK
- ES
- EXC
- NEE
- SO
- SRE 
- WEC
- XEL

## Другие эномические показатели:
- Oil Brent
- Gold
- Gas
#

# Описание проделанной работы

## Cбор и обработка данных
Первым этапом был _сбор данных_. Мы взяли 10 топовых по капитализации компаний энергетического сектора США, а также нашли информацию об их акциях. Далее также были добавлены такие 
экономические показатели, как нефть "Brent", золото и газ, и найдена информациия об их ценах. После этого мы объединили всю уже обработанную информацию по акциям и остальным показателям в единый датасэт. Также мы добавили новый показатель "Индикативная цена" - средняя цена за день. Данный показатель можно трактовать как индекс цены энергетических компаний.
_(более подробно работу с данными можно увидеть в самой работе)_

## Визуализация
1. Сначала были рассмотрены:
    - Взаимосвязь цен нефти и индикативной цены.
    - Взаимосвязь индикативной цены и цены нефти за 2015 год.
    - Взаимосвязь индикативной цены и цены газа.
    - Взаимосвязь индикативной цены и цены газа за 2015 год.

2. Для данных цен ничего обнаружить не удалось, поэтому мы рассмотрели изменения цен за день, и для этого была создана новая таблица для дальнейшего анализа. В новой таблице показано уже _измение_ цен акций компаний и цен нефти Brent, золота и газа в абсолюных значениях.

3. После этого мы построили графики, отображающие попарно то, как значения "Price_Oil_brent", "Price_Gas" и "Price_index" изменялись. Затем проверили корреляцию между попарными данными в разных временных промежутках и сделали выводы.
_(более подробно промежуточные выводы можно увидеть в самой работе)_

4. Далее была рассмотрена корреляция между всеми параметрами за год, рассчитываемая ежедневно, в виде графика. Были сделаны выводы, а также найдено "Интересное наблюдение!".
_(более подробно промежуточные выводы можно увидеть в самой работе)_

5. После этого мы рассмотрели, как в это время себя вела цена золота – "защитного актива", как золото коррелирует с другими активами, построили для всего графики и сделали выводы.
_(более подробно промежуточные выводы можно увидеть в самой работе)_

6. Следующим шагом было рассмотрение взаимосвязь цен отдельных акций. Мы построили график корреляций, используя sns.heatmap, и нашли ошибку в данных (достаточно интересное явление ʕʘ‿ಠʔ). Мы убрали ошибку и построили график корреляций для разных временных промежутков, сделали выводы.
 _(более подробно промежуточные выводы можно увидеть в самой работе)_
 
## Cоздание новых переменных
1. Мы уже создавали до этого момента новую переменную "Price_index" для анализа и выполнения EDA.
2. Мы создадали переменную _эластичности индикативной цены по цене нефти_.Данный значение будет нам показывать предельную зависимость цен данных эндогенных переменных друг от друга. Она обладает прогнозным свойством, посколько показывает потенциал дифференциала цен в зависимости от дифференциала нефти. (Данная переменная понадобится нам для следующего пунката.)

## Гипотезы
Математическое ожидание изменения цен газа равно 0. (Гипотеза не отверглась)

## Машинное обучение
Была построена модель прогноза корреляции пары "Индикативная цена - Нефть" через корреляцию индикативной цены и цены газа с учётом замеченного лага. Модель строится на основе линейной регрессии и использовании полиномиальных коэффициентов. В качестве метрики была выбрана MAPE, и на её основе был подобран лаг. Лаг оказался 1451 день. Полученная модель жалкая.
